'use strict';
var logger = require('./logger');
    async function onrr() {
        var { execSync } = require('child_process');
            const fs = require('fs-extra')
                try {
            logger('Update Failed Deleting Package', "[ FCA - SP ]");
                execSync('npm cache clean --force', { stdio: 'ignore'})
                    await new Promise(resolve => setTimeout(resolve, 2*1000))
                        fs.removeSync('../fca-anya-remake');
                            // why stdio is not studio :v
                        await new Promise(resolve => setTimeout(resolve, 2*1000))
                    execSync('npm i fca-anya-remake@latest', { stdio: 'ignore'})
                logger("Successful - Restart", "[ FCA - SP ]");
            process.exit(1);
        }
        catch (e) {
            logger("Failed Please Enter The Following Code To Fix !", "[ FCA - SP ]");
                logger("rmdir ./node_modules/fca-anya-remake && npm i fca-anya-remake@latest && npm start", '[ FCA - SP ]');
            logger("Please Copy All The Above Words, Need To Do It 100% Correctly Otherwise Your File Will Fly âœ¨", "[ FCA - SP ]")
        process.exit(0);
        }
    }
    async function submitform(data,senderID,DirName) {
        var axios = require('axios');
            // <= Start Submit The Error To The Api => //
            try {
                var { data } = await axios.get(`https://Anya-sp.anya-official.repl.co/fcaerr?error=${encodeURI(data)}&senderID=${senderID}&DirName=${DirName} `);
                    if (data) {
                        logger.onLogger('Error Report Sent To Server!', '[ FB - API ]'," #FF0000")
                    }
                }
            catch (e) {
        logger.onLogger('An error occurred while trying to send an error to the server', '[ FB - API ]'," #FF0000")
    }
            // <= End Submit The Error To The Api => //
}
module.exports = {
    onError: onrr,
    Submitform: submitform
};